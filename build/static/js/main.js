!function(e){function t(t){for(var r,c,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={2:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=function(e){return c.p+"static/js/"+({}[e]||e)+"."+{4:"cdfc44b6"}[e]+".chunk.js"}(e);var s=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,n[1](s)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=this.webpackJsonpwalletchat=this.webpackJsonpwalletchat||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;a.push([314,3]),n()}({314:function(e,t,n){e.exports=n(683)},342:function(e,t,n){},359:function(e,t){},369:function(e,t){},371:function(e,t){},378:function(e,t){},380:function(e,t){},386:function(e,t){},388:function(e,t){},410:function(e,t){},413:function(e,t){},416:function(e,t){},420:function(e,t){},444:function(e,t){},446:function(e,t){},483:function(e,t){},485:function(e,t){},580:function(e,t){},581:function(e,t){},683:function(e,t,n){"use strict";n.r(t);var r,o=n(86),a=n(0),c=n.n(a),i=n(88),s=n.n(i),l=n(87),u=n(273),d=n.n(u),f=n(13),m=n(56),h=n(164),g=n(271),b=n(2),p=(n(336),n(337),Object(b.c)({sm:"300px",md:"650px",lg:"900px",xl:"1200px","2xl":"1536px"})),j=Object(m.b)({config:{initialColorMode:"light",useSystemColorMode:!1},breakpoints:p,fonts:{heading:"Roboto, -apple-system, BlinkMacSystemFont, system-ui, sans-serif",body:"Roboto, -apple-system, BlinkMacSystemFont, system-ui, sans-serif",code:'"Source Code Pro", Menlo, Monaco, Consolas, "Courier New", monospace'},fontSizes:{xs:"0.70rem",sm:"0.75rem",md:".875rem",lg:"1rem",xl:"1.125rem","2xl":"1.25rem","3xl":"1.5rem","4xl":"1.875rem","5xl":"2.25rem","6xl":"3rem","7xl":"3.75rem","8xl":"4.5rem","9xl":"6rem"},styles:{global:{body:{pos:"relative",initialColorMode:"light",bg:"utility.light80",color:"black",minHeight:"100vh"}}},colors:{success:{100:"#EBFCD5",200:"#D4F9AC",300:"#B1EE80",400:"#8FDE5D",500:"#5FC92E",600:"#44AC21",700:"#2D9017",800:"#1A740E",900:"#0D6008"},information:{100:"#D3E5FE",200:"#A7C9FD",300:"#7BA8F9",400:"#598CF4",500:"#2561ED",600:"#1B4ACB",700:"#1236AA",800:"#0B2589",900:"#071971"},warning:{100:"#FFF5CE",200:"#FFE89E",300:"#FFD76D",400:"#FFC749",500:"#FFAD0D",600:"#DB8C09",700:"#B76F06",800:"#935404",900:"#7A4102"},error:{100:"#FFE3D6",200:"#FFC0AD",300:"#FF9783",400:"#FF6F65",500:"#FF3236",600:"#DB2438",700:"#B71938",800:"#930F35",900:"#7A0933"},lightGray:{100:"#FAFAFB",200:"#F5F6F7",300:"#EEEFF2",400:"#E2E4E8",500:"#CACDD5",600:"#B2B7C2",700:"#A4A9B6",800:"#959CAB",900:"#8C93A3"},darkGray:{100:"#747c90",200:"#656E85",300:"#5C657D",400:"#525C76",500:"#49536E",600:"#3A4662",700:"#2C3857",800:"#192648",900:"#0F1D40"}},space:{micro:"4px",xs:"8px",small:"12px",medium:"16px",large:"24px",xl:"40px",xxl:"64px",jumbo:"128px",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},components:{Divider:{baseStyle:{borderColor:"lightGray.200",opacity:1}},Text:{variants:{micro:{fontSize:"0.5rem",color:"lightGray.400",fontWeight:"semibold"},caption:{fontSize:"0.75rem",color:"lightGray.400",fontWeight:"semibold"},body4:{fontSize:"1rem",color:"lightGray.700",fontWeight:"semibold"},body3:{fontSize:"1.25rem",color:"lightGray.700",fontWeight:"semibold"},body2:{fontSize:"1.5rem",color:"lightGray.900",fontWeight:"semibold"},body1:{fontSize:"1.75rem",color:"lightGray.900",fontWeight:"semibold"}}},Heading:{variants:{subheader:{color:"lightGray.400",fontWeight:"semibold",fontSize:"1.5rem",letterSpacing:"4px"},header6:{fontSize:"1.25rem",fontWeight:"semibold",color:"lightGray.900"},header5:{fontSize:"1.5rem",fontWeight:"semibold",color:"lightGray.900"},header4:{fontSize:"1.75rem",fontWeight:"semibold",color:"lightGray.900"},header3:{fontSize:"2rem",fontWeight:"semibold",color:"lightGray.900"},header2:{fontSize:"2.25rem",fontWeight:"semibold",color:"lightGray.900"},header1:{fontSize:"2.5rem",fontWeight:"semibold",color:"lightGray.900"},big2:{fontSize:"4rem",fontWeight:"semibold",color:"lightGray.900"},big1:{fontSize:"5rem",fontWeight:"semibold",color:"lightGray.900"},huge:{fontSize:"8rem",fontWeight:"extrabold"}}},Button:{baseStyle:{fontWeight:"normal",_hover:{boxShadow:"1px 1px 1px 2px var(--chakra-colors-darkGray-700)"}},variants:{success:{bg:"success.700",color:"white",_hover:{bg:"success.600"}},info:{bg:"info.700",color:"white",_hover:{bg:"info.600"}},danger:{bg:"danger.700",color:"white",_hover:{bg:"danger.600"}},warning:{bg:"warning.700",color:"white",_hover:{bg:"warning.600"}},black:{bg:"black",color:"white",_hover:{bg:"gray.800",_disabled:{bg:"gray.800"}}},white:{bg:"white",color:"darkGray.800",_hover:{bg:"lightGray.200"}},morePadding:{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6}}}}},Object(m.c)({colorScheme:"gray"})),v=n(165),x=n.p+"static/media/logo.af0b2ee1.svg",O=n(12),C=function(){return Object(O.jsx)(h.b,{justifyContent:"space-between",alignItems:"stretch",borderBottom:"1px solid var(--chakra-colors-gray-200)",px:8,py:1,background:"white",children:Object(O.jsx)(l.b,{to:"/",style:{display:"flex"},children:Object(O.jsx)(v.a,{src:x,alt:""})})})},y=(n(342),n(279)),S=n(20),A=(n(690),new Date,r=new Date,new Date(r.setDate(r.getDate()-1)),function(e){new Date(e.setDate(e.getDate()+1))}(new Date),function(e){var t="0"+e.getHours(),n="0"+e.getMinutes();return"".concat(t.slice(-2),":").concat(n.slice(-2))}),E=function(e){var t=e.msg;return Object(O.jsxs)("div",{className:"msg ".concat(t.position,"-msg"),children:[Object(O.jsx)("div",{className:"msg-img",style:{backgroundImage:"url(".concat(t.img,")")}}),Object(O.jsxs)("div",{className:"msg-bubble",children:[Object(O.jsxs)("div",{className:"msg-info",children:[Object(O.jsx)("div",{className:"msg-info-name",children:t.fromName}),Object(O.jsx)("div",{className:"msg-info-time",children:A(new Date)})]}),Object(O.jsx)("div",{className:"msg-text",children:t.streamID})]})]})},w=function(){var e=Object(a.useState)("none"),t=Object(S.a)(e,2),n=t[0],r=(t[1],Object(a.useState)([])),o=Object(S.a)(r,2),c=o[0],i=o[1],s=Object(a.useState)(""),l=Object(S.a)(s,2);l[0],l[1];Object(a.useEffect)((function(){fetch(" ".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_INFURA_API:"https://mainnet.infura.io/v3/ad47ad273fb344f88e4a1b35cb2a13ee",REACT_APP_REST_API:"https://simplechatapiforus.herokuapp.com/users"}).restApiUrl),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){for(var t=0;t<e.length;t++)e[t].streamID,e[t].toAddr.toLowerCase()===n.toLowerCase()?(console.log("add message receiver",e[t].streamID),u(e[t].streamID,e[t].fromName,e[t].fromAddr,e[t].read,e[t].id,"left")):e[t].fromAddr.toLowerCase()===n.toLowerCase()&&(console.log("add message sender",e[t].streamID),u(e[t].streamID,e[t].fromName,e[t].fromAddr,e[t].read,e[t].id,"right"))})).catch((function(e){console.error("GET to REST API error!!!!!!!!!!!!:",e)}))}),[]);var u=function(e,t,n,r,o,a){if(!c[o]){console.log("adding message receiver:",e);var s={streamID:"".concat(e),fromName:"".concat(t),fromAddr:"".concat(n),toAddr:"",read:r,id:o,position:"".concat(a)},l=Object(y.a)(c);l[o]=s,i(l)}};return Object(O.jsx)(h.a,{children:c.map((function(e,t){return Object(O.jsx)(E,{msg:e},e.streamID)}))})},D=n(62),_=(n(153),n(17)),F=n.n(_),N=n(275),T=n.n(N),k=n(276),P=n.n(k),I=function(e){return e[0]?e[0].toLowerCase():null},W=Object.freeze({CONNECT:"connect",DISCONNECT:"disconnect",CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged"}),G=n(110),B={set:function(){var e=Object(D.a)(F.a.mark((function e(t,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage){e.next=4;break}return e.abrupt("return",localStorage.setItem(t,JSON.stringify(n)));case 4:chrome.storage.local.set(Object(G.a)({},t,JSON.stringify(n)),(function(){return n}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),get:function(){var e=Object(D.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage){e.next=7;break}if(!(n=localStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(n));case 4:return e.abrupt("return",null);case 7:chrome.storage.local.get([t],(function(e){return e}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=B,R=c.a.createContext();var z=c.a.memo((function(e){var t=e.children,n=c.a.useState(null),r=Object(S.a)(n,2),o=r[0],a=r[1],i=c.a.useState(null),s=Object(S.a)(i,2),l=s[0],u=s[1],d=c.a.useState(null),f=Object(S.a)(d,2),m=f[0],h=f[1],g=c.a.useState(!1),b=Object(S.a)(g,2),p=b[0],j=b[1],v=c.a.useState(!1),x=Object(S.a)(v,2),C=x[0],y=x[1];console.log({chainId:o,account:l,web3:m,isAuthenticated:p}),c.a.useEffect((function(){return w(),function(){var e=_();E(e)}}),[]);var A=function(e){e&&e.on&&(e.on(W.CHAIN_CHANGED,z),e.on(W.ACCOUNTS_CHANGED,B),e.on(W.CONNECT,H),e.on(W.DISCONNECT,M))},E=function(e){e&&e.removeListener&&(e.removeListener(W.CHAIN_CHANGED,z),e.removeListener(W.ACCOUNTS_CHANGED,B),e.removeListener(W.CONNECT,H),e.removeListener(W.DISCONNECT,M))},w=function(){var e=Object(D.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("metamask-connected");case 2:if(null===(t=e.sent)||void 0===t||!t.connected){e.next=6;break}return e.next=6,k();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){return window.ethereum?(console.log("found window.ethereum>>"),window.ethereum):T()()},N=function(){var e=Object(D.a)(F.a.mark((function e(t){var n,r,o,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,Promise.all([t.request({method:"eth_requestAccounts"}),t.request({method:"eth_chainId"})]);case 3:return n=e.sent,r=Object(S.a)(n,2),o=r[0],a=r[1],e.abrupt("return",[o,a]);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(D.a)(F.a.mark((function e(){var t,n,r,o,c,i,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("connectWallet"),e.prev=1,t=_(),e.next=5,N(t);case 5:n=e.sent,r=Object(S.a)(n,2),o=r[0],c=r[1],o&&c&&(y(!0),i=I(o),s=new P.a(t),u(i),a(c),h(s),j(!0),L.set("metamask-connected",{connected:!0}),A(t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("error while connect",e.t0);case 15:return e.prev=15,y(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),G=function(){console.log("disconnectWallet");try{L.set("metamask-connected",{connected:!1}),u(null),a(null),j(!1),h(null)}catch(e){console.log(e)}},B=function(e){u(I(e)),console.log("[account changes]: ",I(e))},z=function(e){a(e),console.log("[chainId changes]: ",e)},H=function(){j(!0),console.log("[connected]")},M=function(){console.log("[disconnected]"),G()};return Object(O.jsx)(R.Provider,{value:{disconnectWallet:G,connectWallet:k,isAuthenticated:p,appLoading:C},children:t})})),H=z,M=function(){var e=c.a.useContext(R),t=e.isAuthenticated,n=e.connectWallet,r=e.disconnectWallet;return Object(O.jsx)(m.a,{theme:j,children:Object(O.jsxs)(h.a,{children:[Object(O.jsx)(C,{}),Object(O.jsx)(g.a,{variant:"black",onClick:t?r:n,id:"wallet-connect",children:t?"Disconnect Wallet":"Connect Wallet"}),Object(O.jsx)(h.b,{px:8,py:6,children:Object(O.jsx)(h.a,{children:Object(O.jsxs)(f.d,{children:[Object(O.jsx)(f.b,{path:"/chat",element:Object(O.jsx)(w,{})}),Object(O.jsx)(f.b,{path:"/",element:Object(O.jsx)(f.a,{to:"/chat",replace:!0})})]})})})]})})},U=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,691)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.defaults.baseURL="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_INFURA_API:"https://mainnet.infura.io/v3/ad47ad273fb344f88e4a1b35cb2a13ee",REACT_APP_REST_API:"https://simplechatapiforus.herokuapp.com/users"}).REACT_APP_COVALENT_API_URL),s.a.render(Object(O.jsxs)(a.StrictMode,{children:[Object(O.jsx)(o.b,{}),Object(O.jsx)(l.a,{children:Object(O.jsx)(H,{children:Object(O.jsx)(M,{})})})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),U()}});
//# sourceMappingURL=main.js.map